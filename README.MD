# State Machine

## demo 介绍

这个demo源于我在实习工作中学习的知识以及目前遇到的困难，我希望把他从复杂的系统中抽离出来，帮助我更好的分析以及优化。

这是一个简单的demo，实现了异步处理多状态任务的状态机，简单介绍一下涉及到的多个词汇。


## 词汇介绍

### 异步

`异步(async)` 是相对于`同步(sync)` 而言的。

- `同步(sync)` 就是一件一件事情执行，前一个任务完成后一个任务才开始。
- `异步(async)` 就是任务在其他线程执行，每一个任务只是发起申请，后台执行。

### 状态机

状态机一般指有限状态机（英语：finite-state machine，缩写：FSM）又称有限状态自动机（英语：finite-state automaton，缩写：FSA），是表示有限个状态以及在这些状态之间的转移和动作等行为的数学计算模型。

一个任务在执行阶段可能会遇到多种状态：**NEW**, **Working**, **Check**, **Faild**, **Finished**, ...

这些可以穷举的任务状态，我称之为有状态模式的任务，任务可以通过状态，驱动每一阶段需要做的事，每一阶段的任务是固定的，通过状态来推动。

举一些我们常见的例子
1. 进程线程的状态切换模型
2. [剑指 Offer II 004. 只出现一次的数字 ](https://leetcode.cn/problems/WGki4K/) 还有跟这个差不多的问出现三次的，找不到原题了
3. OA系统的各种任务审批(请假，出差，报销，。。。)

## demo目标

这个demo有两个阶段
1. 建立一个通用简单的状态机模型，包含提供通用接口，全自动执行，任意状态启动，横向拓展
2. 优化状态机模型，提供重启恢复功能，多任务批处理

### 通用状态机模型

通过状态机的接口，定义单个任务下不同状态的执行流程和后处理流程，将任务推入状态机后可以全自动执行。

不同的任务可以有各种状态下的流程定义，在不同任务的不同状态下，都可以将任务推进任务机内继续执行接下来的流程。

### 优化状态机模型

提供单点/多点部署下状态机异常恢复功能，多任务批处理功能。

## 加入我

目前一期我已经由完整的思路和想法，二期是我在工作中正在处理的，如果你看了我的代码或者在使用的过程中发现了什么问题，可以给我提issue.

如果你想跟我一起完善这个demo也欢迎给我提pr,pr的commit信息有一点简单的要求

```
[feat|fix|docs] Commit information in uppercase.
```

如果觉得我做的还可以的话，也可以给我点个stars。


